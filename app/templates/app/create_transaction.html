{% extends "app/base.html" %}
{% load i18n %}

{% block head %}
<script src="/app/static/js/create_transaction.js"
        type="text/javascript"
        charset="utf-8" async defer></script>
{{ wizard.form.media }}
{% endblock %}

{% block content %}
<p>Step {{ wizard.steps.step1 }} of {{ wizard.steps.count }}</p>
<form action="" method="post">{% csrf_token %}
<table>
{% load bootstrap %}

{% load repairs_form %}
{{ wizard.management_form }}
    {% if wizard.steps.step0 == 1 %}
        {% for category_pair in category_dict.iteritems %}
            <h3> {{ category_pair.0 }} </h3>
            {% for field in wizard.form %}
            <div class="fieldWrapper">
                {% if category_pair.1|is_member:field.label %}
                (${{ category_pair.1|get_price:field.label }})
                {{field | bootstrap}}
                {% endif %}
            </div>
            {% endfor %}
        {% endfor %}

        {% for field in wizard.form %}
            {% if non_task_fields|is_member:field.label %}
                <div class="fieldWrapper">
                    {{field | bootstrap}}
                </div>
            {% endif %}
        {% endfor %}
    {% else %}
        {% for field in wizard.form %}
            <div class="fieldWrapper">
                {{field | bootstrap}}
            </div>
        {% endfor %}
    {% endif %}

</table>
{% if wizard.steps.prev %}
<button name="wizard_goto_step" type="submit" value="{{ wizard.steps.first }}" class="btn btn-default btn-lg">{% trans "first step" %}</button>
<button name="wizard_goto_step" type="submit" value="{{ wizard.steps.prev }}" class="btn btn-default btn-lg">{% trans "prev step" %}</button>
{% endif %}
<input type="submit" value='{% trans "submit" %}' class="btn btn-default btn-lg"/>
</form>
{% endblock %}